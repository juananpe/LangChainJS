"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.debounce = exports.getObjectSizeInMB = exports.filterDocuments = void 0;
function filterDocuments(documents, filterOptions) {
    let filteredDocuments = documents;
    if (filterOptions) {
        if (filterOptions.include) {
            filteredDocuments = filteredDocuments.filter((doc) => matchesCriteria(doc, filterOptions.include));
        }
        if (filterOptions.exclude) {
            filteredDocuments = filteredDocuments.filter((doc) => !matchesCriteria(doc, filterOptions.exclude));
        }
    }
    return filteredDocuments;
}
exports.filterDocuments = filterDocuments;
function matchesCriteria(document, criteria) {
    if (criteria.metadata) {
        for (const key in criteria.metadata) {
            if (document.metadata[key] !== criteria.metadata[key]) {
                return false;
            }
        }
    }
    if (criteria.text) {
        const texts = Array.isArray(criteria.text) ? criteria.text : [criteria.text];
        if (!texts.includes(document.text)) {
            return false;
        }
    }
    return true;
}
function getObjectSizeInMB(obj) {
    const bytes = JSON.stringify(obj).length;
    const kilobytes = bytes / 1024;
    return kilobytes / 1024;
}
exports.getObjectSizeInMB = getObjectSizeInMB;
function debounce(func, delay) {
    let timeoutId = null;
    return function (...args) {
        const context = this;
        if (timeoutId) {
            clearTimeout(timeoutId);
        }
        timeoutId = setTimeout(() => func.apply(context, args), delay);
    };
}
exports.debounce = debounce;
